(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,a){e.exports=a(75)},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),o=a.n(s),c=a(16),u=a(7),i=a(40),l=a(18),m=a(2),p=a(3),h=a(5),d=a(4),g=a(6),f=a(17),v=function(e){return r.a.createElement(c.b,{className:"item",to:e.to},e.children)},y=function(e){return r.a.createElement("div",{className:"ui button "+e.className,onClick:e.onClick},e.children)},b=a(15),O=a.n(b),E=a(19),T=a(42),j=a.n(T).a.create({baseURL:"https://api.stya.net/nim",transformRequest:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).map(function(e){return"".concat(encodeURIComponent(e[0]),"=").concat(encodeURIComponent(e[1]))}).join("&")}(e)}}),k=function(){return{type:"AUTH_START"}},w=function(e){return localStorage.setItem("userToken",e),{type:"AUTH_SUCCESS",userToken:e}},N=function(e){return{type:"AUTH_FAIL",header:"Error",message:e.status}},S=function(){return localStorage.removeItem("userToken"),localStorage.removeItem("expireDate"),{type:"AUTH_LOGOUT"}},C=function(e){localStorage.setItem("expireDate",e);var t=new Date(e).getTime()-(new Date).getTime();return function(e){e(function(e){return{type:"LOGOUT_TIMEOUT",timer:setTimeout(function(){e(S())},t)}}(e))}},L=function(e){return{type:"SEARCH_START",message:{type:"yellow",header:"Loading...",message:"Trying to load data, please wait"},keyword:e}},A=function(e,t,a,n){return function(){var r=Object(E.a)(O.a.mark(function r(s){var o,c,u;return O.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e.length>0)){r.next=13;break}return s(L(e)),r.next=4,j.get("/byname",{headers:{"Auth-Token":t},params:{name:e,count:30,page:n}});case 4:return o=r.sent,r.next=7,o.data.payload;case 7:(c=r.sent).length>0?s(I(c,a,!0)):s(a?I([],a,!1):_()),u=new Date((new Date).getTime()+432e5),s(C(u)),r.next=14;break;case 13:s(U());case 14:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},_=function(){return{type:"SEARCH_NOT_FOUND",message:{type:"negative",header:"Not Found!",message:"Sorry, we can't find any result :("}}},I=function(e,t,a){return{type:"SEARCH_FOUND",results:e,isOnDemand:t,hasMore:a}},U=function(){return{type:"NOT_SEARCHING",message:{type:"blue",header:"Searching?",message:"Please type in your keyword"}}},D=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleLoginLogout=function(e){a.props.isLoggedIn;e.preventDefault()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;return e=this.props.isLoggedIn?r.a.createElement(n.Fragment,null,r.a.createElement(v,{to:"/"},"Home"),r.a.createElement("div",{className:"right menu"},r.a.createElement("div",{className:"item"},r.a.createElement(y,{className:"primary",onClick:this.props.logout},"Logout")))):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"right menu"},r.a.createElement("div",{className:"item"},r.a.createElement(c.b,{to:"/login"},r.a.createElement(y,{className:"primary"},"Login"))))),r.a.createElement("div",{className:"ui menu"},r.a.createElement("div",{className:"header item"},"ITB NIM Finder"),e)}}]),t}(n.Component),M=Object(u.b)(function(e){return{isLoggedIn:null!=e.auth.userToken}},function(e){return{logout:function(){return e(S())}}})(D),x=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(M,{isAuth:this.props.isAuthenticated,drawerToggleClicked:this.sideDrawerToggleHandler}),r.a.createElement("main",{className:"main",style:this.style},this.props.children))}}]),t}(n.Component),H=a(26),R=function(e){return r.a.createElement("div",{className:"ui message ".concat(e.className)},r.a.createElement("div",{className:"header"},e.header),r.a.createElement("p",null,e.message))},F=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={input:""},a.onChange=function(e){e.persist(),a.setState({input:e.target.value},function(){a.props.onChange(e)})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"field"},r.a.createElement("label",null,this.props.label),r.a.createElement("input",{type:"password"===this.props.className?"password":"text",placeholder:this.props.placeholder,value:this.state.input,onChange:this.onChange,className:this.props.className}))}}]),t}(n.Component),K=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={checked:!0,username:"",password:""},a.handleCheckboxChange=function(e){a.setState({checked:!a.state.checked})},a.onButtonClick=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;e.target.className.includes("login")?a.props.auth(n,r,!0):a.props.auth(n,r,!1)},a.onInputChange=function(e){a.setState(Object(H.a)({},e.target.className,e.target.value))},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t;if(this.props.authMessage){var a=this.props.authMessage,n=a.type,s=a.header,o=a.message;e=r.a.createElement(R,{className:n,header:s,message:o})}return this.props.isLoggedIn&&(t=r.a.createElement(f.a,{to:"/"})),r.a.createElement("div",{className:"ui raised very padded segment"},t,r.a.createElement("h2",{className:"ui header"},"Login"),r.a.createElement("form",{className:"ui form"},r.a.createElement(F,{className:"username",label:"Username",placeholder:"Username",onChange:this.onInputChange}),r.a.createElement(F,{className:"password",label:"Password",placeholder:"Password",onChange:this.onInputChange}),e,r.a.createElement(y,{className:"login",onClick:this.onButtonClick},"Login"),r.a.createElement(y,{className:"signup",onClick:this.onButtonClick},"Signup")))}}]),t}(n.Component),G=Object(u.b)(function(e){return{authMessage:e.auth.authMessage,isLoggedIn:null!=e.auth.userToken}},function(e){return{auth:function(t,a,n){return e(function(e,t,a){return function(n){n(k);var r={username:e,password:t},s="/login";a||(s="/register"),j.post(s,r).then(function(e){var t=e.data;if(a)if(0===t.code){var r=new Date((new Date).getTime()+432e5);n(w(t.token)),n(C(r))}else n(N(t));else 0===t.code?n({type:"REGIS_SUCCESS",header:"Success!",message:"You have registered successfully!"}):n(N(t))}).catch(function(e){})}}(t,a,n))}}})(K),B=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={currentKeyword:"",timer:null},a.componentDidMount=function(){a.props.search("",a.props.userToken)},a.onKeywordChange=function(e){clearTimeout(a.state.timer),a.setState({currentKeyword:e.target.value});var t=setTimeout(function(){a.props.search(a.state.currentKeyword,a.props.userToken,!1,0)},500);a.setState({timer:t})},a.style={fontFamily:"'Open Sans', sans-serif",fontWeight:"600"},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui fluid icon input"},r.a.createElement("input",{type:"text",value:this.state.currentKeyword,onChange:this.onKeywordChange,placeholder:"Masukkan NIM atau Nama"}),r.a.createElement("i",{className:"search icon"}))}}]),t}(r.a.Component),P=Object(u.b)(function(e){return{userToken:e.auth.userToken}},function(e){return{search:function(t,a,n,r){return e(A(t,a,n,r))}}})(B),q=function(e){var t=e.item;return r.a.createElement("div",{className:"item"},r.a.createElement("img",{className:"ui avatar image",src:"https://ui-avatars.com/api/?name=".concat(t.name,"&rounded=true"),alt:"user profile"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},t.name),r.a.createElement("div",{className:"ui horizontal divided list"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"description"},t.prodi)),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"description"},t.nim_jur)),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"description"},t.nim_tpb)))))},J=a(43),X=a.n(J),Y=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleScroll=X.a.throttle(function(e){var t=document.documentElement,n=t.scrollHeight-(t.scrollTop+t.clientHeight)<100,r=a.props,s=r.userToken,o=r.keyword,c=r.page,u=r.isLoading,i=r.hasMore;n&&i&&!u&&a.props.onDemand(s,o,c)},500),a.componentDidMount=function(){window.addEventListener("scroll",a.handleScroll,!0)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t;return this.props.results&&(e=r.a.createElement("div",{className:"ui very relaxed selection animated divided list"},this.props.results.map(function(e){return r.a.createElement(q,{key:e.nim_jur,item:e})}))),this.props.message&&(t=r.a.createElement("div",null,r.a.createElement(R,{className:this.props.message.type,header:this.props.message.header,message:this.props.message.message}))),r.a.createElement("div",{style:{marginTop:"20px",marginBottom:"30px"}},e,t)}}]),t}(n.Component),z=Object(u.b)(function(e){return{userToken:e.auth.userToken,results:e.search.results,message:e.search.message,page:e.search.page,isLoading:e.search.isLoading,keyword:e.search.keyword,hasMore:e.search.hasMore}},function(e){return{onDemand:function(t,a,n){return e(A(a,t,!0,n+1))}}})(Y),V=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={currentKeyword:"",results:[],message:null},a.onKeywordChange=function(){var e=Object(E.a)(O.a.mark(function e(t){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=9;break}return a.setState({currentKeyword:t}),e.next=4,j.get("/byname",{headers:{"Auth-Token":a.props.userToken},params:{name:a.state.currentKeyword,count:50,page:0}});case 4:(n=(n=e.sent).data.payload).length>0?a.setState({results:n,message:null}):a.setState({message:{type:"negative",header:"Not Found!",message:"Sorry, we can't find any result :("}}),e.next=10;break;case 9:a.setState({message:{type:"blue",header:"Searching?",message:"Please type in your keyword"}});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=function(){a.onKeywordChange("")},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P,{onChange:this.onKeywordChange}),r.a.createElement(z,{results:this.state.results,message:this.state.message}))}}]),t}(n.Component),W=Object(u.b)(function(e){return{userToken:e.auth.userToken}})(V),Q=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.tryLoginAtStart()}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui container",style:this.style},r.a.createElement(x,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/login",component:G}),this.props.isLoggedIn?null:r.a.createElement(f.a,{to:"/login"}),this.props.isLoggedIn?r.a.createElement(f.b,{path:"/",component:W}):null)))}}]),t}(n.Component),Z=Object(u.b)(function(e){return{isLoggedIn:null!=e.auth.userToken,logoutTimer:e.auth.logoutTimer}},function(e){return{tryLoginAtStart:function(){return e(function(){var e=Object(E.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=localStorage.getItem("userToken"))?(n=new Date(localStorage.getItem("expireDate"))).getTime()-(new Date).getTime()<=6e4?t(S()):(t(w(a)),t(C(n))):t(S());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},logoutOnTokenExpire:function(t){return e(C(t))}}})(Q),$=a(14),ee={userToken:null,authMessage:null,authLoading:!1,logoutTimer:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return function(e){return Object($.a)({},e,{authMessage:null,authLoading:!0})}(e);case"AUTH_SUCCESS":return function(e,t){return Object($.a)({},e,{userToken:t.userToken,authLoading:!1,authMessage:{type:"positive",header:"Login success!",message:"You have been logged in successfully!"}})}(e,t);case"AUTH_FAIL":return function(e,t){return Object($.a)({},e,{authMessage:{type:"negative",header:t.header,message:t.message},authLoading:!1})}(e,t);case"REGIS_SUCCESS":return function(e,t){return Object($.a)({},e,{authMessage:{type:"positive",header:t.header,message:t.message}})}(e,t);case"AUTH_LOGOUT":return ee;case"LOGOUT_TIMEOUT":return function(e,t){return clearTimeout(e.logoutTimer),Object($.a)({},e,{logoutTimer:t.timer})}(e,t);default:return e}},ae=a(32),ne={results:[],message:null,hasMore:!1,page:0,isLoading:!1,keyword:""},re=function(e,t){return Object($.a)({},e,{message:t.message,results:[],isLoading:!1})},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_START":return function(e,t){return Object($.a)({},e,{message:t.message,isLoading:!0,keyword:t.keyword})}(e,t);case"SEARCH_FOUND":return function(e,t){var a,n;return t.isOnDemand?(a=[].concat(Object(ae.a)(e.results),Object(ae.a)(t.results)),n=e.page+1):(a=t.results,n=0),Object($.a)({},e,{results:a,message:null,isLoading:!1,page:n,hasMore:t.hasMore})}(e,t);case"SEARCH_NOT_FOUND":case"NOT_SEARCHING":return re(e,t);case"AUTH_LOGOUT":return ne;default:return e}},oe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ce=Object(l.c)({auth:te,search:se}),ue=Object(l.e)(ce,oe(Object(l.a)(i.a)));o.a.render(r.a.createElement(u.a,{store:ue},r.a.createElement(c.a,null,r.a.createElement(Z,null))),document.querySelector("#root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.7f5e9d57.chunk.js.map